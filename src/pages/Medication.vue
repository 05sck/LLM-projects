<template>
  <div class="medication-page">
    <!-- ì¢Œì¸¡: ì…ë ¥ í¼ -->
    <div class="input-section">
      <h1>ğŸ’Š ë³µì•½ ì •ë³´</h1>
      <MedicationTable />
      <MedicationForm @updateNotification="updateNotificationText" />
    </div>

    <!-- ìš°ì¸¡: ì•Œë¦¼ ë¯¸ë¦¬ë³´ê¸° -->
    <div class="output-section">
      <h2>ğŸ“¢ ì•Œë¦¼ ë¯¸ë¦¬ë³´ê¸°</h2>
      <div class="notification-container">
        <NotificationPreview :message="notificationText" />
      </div>
      
      <div class="buttons">
        <button class="send-btn" @click="sendNotification">ğŸ“© ë¬¸ì ë³´ë‚´ê¸°</button>
        <button class="reset-btn" @click="resetForm">ğŸ”„ ì…ë ¥ ì´ˆê¸°í™”</button>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref } from "vue";
import MedicationTable from "@/components/MedicationTable.vue";
import MedicationForm from "@/components/MedicationForm.vue";
import NotificationPreview from "@/components/NotificationPreview.vue";

const notificationText = ref("");  // ì•Œë¦¼ ë¬¸êµ¬

// ğŸ”¥ ì•Œë¦¼ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
const updateNotificationText = (message) => {
  notificationText.value = message;
};

// ğŸ“© ë¬¸ì ì „ì†¡ ê¸°ëŠ¥
const sendNotification = () => {
  if (notificationText.value.trim() === "") {
    alert("âš ï¸ ì•Œë¦¼ ë¬¸ìê°€ ì—†ìŠµë‹ˆë‹¤!");
    return;
  }
  alert("ğŸ“© ë¬¸ì ì „ì†¡ ì™„ë£Œ!");
};

// ğŸ”„ ì…ë ¥ ë°ì´í„° ì´ˆê¸°í™”
const resetForm = () => {
  notificationText.value = "";  // ì•Œë¦¼ ì´ˆê¸°í™”
};
</script>

<style scoped>
/* ğŸ”¹ ê¸°ë³¸ ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ */
.medication-page {
  display: flex;
  justify-content: space-between;
  gap: 20px;
  padding: 20px;
}

/* ğŸ”¹ ì¢Œì¸¡ ì…ë ¥ í¼ */
.input-section {
  width: 50%;
  background: #f8f9fa;
  padding: 20px;
  border-radius: 10px;
  overflow-y: auto; /* ğŸ”¥ ë†’ì´ ì´ˆê³¼ ì‹œ ìŠ¤í¬ë¡¤ */
  max-height: 600px;
}

/* ğŸ”¹ ìš°ì¸¡ ì•Œë¦¼ ë¯¸ë¦¬ë³´ê¸° */
.output-section {
  width: 50%;
  background: #fff;
  padding: 20px;
  border-radius: 10px;
  text-align: center;
}

/* ğŸ”¹ ì•Œë¦¼ ë¯¸ë¦¬ë³´ê¸° ìë™ í™•ì¥ */
.notification-container {
  min-height: 100px;
  max-height: 300px;
  overflow-y: auto;
  background: #f3f3f3;
  padding: 10px;
  border-radius: 5px;
}

/* ğŸ”¹ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
.buttons {
  margin-top: 20px;
}

button {
  margin: 10px;
  padding: 10px 15px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  transition: 0.3s;
}

.send-btn {
  background-color: #007bff;
  color: white;
}

.reset-btn {
  background-color: #dc3545;
  color: white;
}

button:hover {
  opacity: 0.8;
}
</style>
